<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vehicle Maintenance Tracker</title>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Lucide icons as inline SVG components
        const Plus = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M5 12h14"/><path d="M12 5v14"/>
            </svg>
        );

        const Car = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2"/>
                <circle cx="7" cy="17" r="2"/><path d="M9 17h6"/><circle cx="17" cy="17" r="2"/>
            </svg>
        );

        const Wrench = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/>
            </svg>
        );

        const Calendar = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/>
            </svg>
        );

        const DollarSign = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <line x1="12" x2="12" y1="2" y2="22"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
            </svg>
        );

        const Trash2 = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/>
            </svg>
        );

        const AlertCircle = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/>
            </svg>
        );

        const VehicleMaintenanceTracker = () => {
            const [vehicles, setVehicles] = useState([]);
            const [records, setRecords] = useState([]);
            const [reminders, setReminders] = useState([]);
            const [activeTab, setActiveTab] = useState('dashboard');
            const [selectedVehicle, setSelectedVehicle] = useState(null);
            const [showAddVehicle, setShowAddVehicle] = useState(false);
            const [showAddRecord, setShowAddRecord] = useState(false);
            const [showAddReminder, setShowAddReminder] = useState(false);

            useEffect(() => {
                const vehiclesData = localStorage.getItem('vehicles');
                const recordsData = localStorage.getItem('records');
                const remindersData = localStorage.getItem('reminders');
                
                if (vehiclesData) setVehicles(JSON.parse(vehiclesData));
                if (recordsData) setRecords(JSON.parse(recordsData));
                if (remindersData) setReminders(JSON.parse(remindersData));
            }, []);

            useEffect(() => {
                if (vehicles.length > 0) {
                    localStorage.setItem('vehicles', JSON.stringify(vehicles));
                }
            }, [vehicles]);

            useEffect(() => {
                if (records.length > 0) {
                    localStorage.setItem('records', JSON.stringify(records));
                }
            }, [records]);

            useEffect(() => {
                if (reminders.length > 0) {
                    localStorage.setItem('reminders', JSON.stringify(reminders));
                }
            }, [reminders]);

            const addVehicle = (vehicle) => {
                const newVehicle = { ...vehicle, id: Date.now().toString() };
                setVehicles([...vehicles, newVehicle]);
                if (!selectedVehicle) setSelectedVehicle(newVehicle.id);
                setShowAddVehicle(false);
            };

            const addRecord = (record) => {
                const newRecord = { ...record, id: Date.now().toString(), vehicleId: selectedVehicle };
                setRecords([...records, newRecord]);
                setShowAddRecord(false);
            };

            const addReminder = (reminder) => {
                const newReminder = { ...reminder, id: Date.now().toString(), vehicleId: selectedVehicle };
                setReminders([...reminders, newReminder]);
                setShowAddReminder(false);
            };

            const deleteRecord = (id) => {
                setRecords(records.filter(r => r.id !== id));
            };

            const deleteReminder = (id) => {
                setReminders(reminders.filter(r => r.id !== id));
            };

            const getActiveReminders = () => {
                if (!selectedVehicle) return [];
                const vehicle = vehicles.find(v => v.id === selectedVehicle);
                if (!vehicle) return [];

                return reminders.filter(r => {
                    if (r.vehicleId !== selectedVehicle) return false;
                    
                    if (r.type === 'mileage') {
                        return vehicle.currentMileage >= r.mileage;
                    } else {
                        return new Date(r.date) <= new Date();
                    }
                });
            };

            const updateVehicleMileage = (mileage) => {
                setVehicles(vehicles.map(v => 
                    v.id === selectedVehicle ? { ...v, currentMileage: parseInt(mileage) } : v
                ));
            };

            return (
                <div className="min-h-screen bg-gray-50">
                    <div className="max-w-6xl mx-auto p-4">
                        <div className="bg-white rounded-lg shadow-sm p-6 mb-6">
                            <div className="flex items-center justify-between mb-4">
                                <h1 className="text-3xl font-bold text-gray-900">Vehicle Maintenance Tracker</h1>
                                <button
                                    onClick={() => setShowAddVehicle(true)}
                                    className="flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"
                                >
                                    <Plus size={20} />
                                    Add Vehicle
                                </button>
                            </div>

                            {vehicles.length > 0 && (
                                <div className="flex gap-2 overflow-x-auto pb-2">
                                    {vehicles.map(vehicle => (
                                        <button
                                            key={vehicle.id}
                                            onClick={() => setSelectedVehicle(vehicle.id)}
                                            className={`flex items-center gap-2 px-4 py-2 rounded-lg whitespace-nowrap ${
                                                selectedVehicle === vehicle.id
                                                    ? 'bg-blue-600 text-white'
                                                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                            }`}
                                        >
                                            <Car size={18} />
                                            {vehicle.year} {vehicle.make} {vehicle.model}
                                        </button>
                                    ))}
                                </div>
                            )}
                        </div>

                        {vehicles.length === 0 ? (
                            <div className="bg-white rounded-lg shadow-sm p-12 text-center">
                                <Car size={64} className="mx-auto text-gray-400 mb-4" />
                                <h2 className="text-2xl font-semibold text-gray-700 mb-2">No Vehicles Added</h2>
                                <p className="text-gray-500 mb-6">Get started by adding your first vehicle</p>
                                <button
                                    onClick={() => setShowAddVehicle(true)}
                                    className="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700"
                                >
                                    Add Your First Vehicle
                                </button>
                            </div>
                        ) : (
                            <>
                                <div className="flex gap-2 mb-6">
                                    <button
                                        onClick={() => setActiveTab('dashboard')}
                                        className={`px-4 py-2 rounded-lg ${
                                            activeTab === 'dashboard' ? 'bg-white shadow-sm' : 'bg-transparent hover:bg-white/50'
                                        }`}
                                    >
                                        Dashboard
                                    </button>
                                    <button
                                        onClick={() => setActiveTab('history')}
                                        className={`px-4 py-2 rounded-lg ${
                                            activeTab === 'history' ? 'bg-white shadow-sm' : 'bg-transparent hover:bg-white/50'
                                        }`}
                                    >
                                        Service History
                                    </button>
                                    <button
                                        onClick={() => setActiveTab('reminders')}
                                        className={`px-4 py-2 rounded-lg ${
                                            activeTab === 'reminders' ? 'bg-white shadow-sm' : 'bg-transparent hover:bg-white/50'
                                        }`}
                                    >
                                        Reminders
                                    </button>
                                </div>

                                {activeTab === 'dashboard' && selectedVehicle && (
                                    <div className="space-y-6">
                                        {getActiveReminders().length > 0 && (
                                            <div className="bg-amber-50 border border-amber-200 rounded-lg p-4">
                                                <div className="flex items-center gap-2 mb-3">
                                                    <AlertCircle size={20} className="text-amber-600" />
                                                    <h3 className="font-semibold text-amber-900">Maintenance Due</h3>
                                                </div>
                                                <div className="space-y-2">
                                                    {getActiveReminders().map(reminder => (
                                                        <div key={reminder.id} className="text-amber-800">
                                                            {reminder.service} is due
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>
                                        )}

                                        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                                            <div className="bg-white rounded-lg shadow-sm p-6">
                                                <div className="flex items-center gap-3 mb-2">
                                                    <Wrench size={24} className="text-blue-600" />
                                                    <h3 className="font-semibold text-gray-700">Total Services</h3>
                                                </div>
                                                <p className="text-3xl font-bold text-gray-900">
                                                    {records.filter(r => r.vehicleId === selectedVehicle).length}
                                                </p>
                                            </div>

                                            <div className="bg-white rounded-lg shadow-sm p-6">
                                                <div className="flex items-center gap-3 mb-2">
                                                    <DollarSign size={24} className="text-green-600" />
                                                    <h3 className="font-semibold text-gray-700">Total Spent</h3>
                                                </div>
                                                <p className="text-3xl font-bold text-gray-900">
                                                    ${records
                                                        .filter(r => r.vehicleId === selectedVehicle)
                                                        .reduce((sum, r) => sum + parseFloat(r.cost || 0), 0)
                                                        .toFixed(2)}
                                                </p>
                                            </div>

                                            <div className="bg-white rounded-lg shadow-sm p-6">
                                                <div className="flex items-center gap-3 mb-2">
                                                    <Calendar size={24} className="text-purple-600" />
                                                    <h3 className="font-semibold text-gray-700">Last Service</h3>
                                                </div>
                                                <p className="text-lg font-bold text-gray-900">
                                                    {records.filter(r => r.vehicleId === selectedVehicle).length > 0
                                                        ? new Date(
                                                            Math.max(
                                                                ...records
                                                                    .filter(r => r.vehicleId === selectedVehicle)
                                                                    .map(r => new Date(r.date))
                                                            )
                                                        ).toLocaleDateString()
                                                        : 'No services yet'}
                                                </p>
                                            </div>
                                        </div>

                                        <div className="bg-white rounded-lg shadow-sm p-6">
                                            <h3 className="font-semibold text-gray-700 mb-4">Update Current Mileage</h3>
                                            <div className="flex gap-3">
                                                <input
                                                    type="number"
                                                    placeholder="Current mileage"
                                                    defaultValue={vehicles.find(v => v.id === selectedVehicle)?.currentMileage || ''}
                                                    onChange={(e) => updateVehicleMileage(e.target.value)}
                                                    className="flex-1 px-4 py-2 border rounded-lg"
                                                />
                                            </div>
                                        </div>

                                        <div className="bg-white rounded-lg shadow-sm p-6">
                                            <h3 className="font-semibold text-gray-700 mb-4">Quick Actions</h3>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                                                <button
                                                    onClick={() => setShowAddRecord(true)}
                                                    className="flex items-center justify-center gap-2 bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700"
                                                >
                                                    <Plus size={20} />
                                                    Log Service
                                                </button>
                                                <button
                                                    onClick={() => setShowAddReminder(true)}
                                                    className="flex items-center justify-center gap-2 bg-purple-600 text-white px-4 py-3 rounded-lg hover:bg-purple-700"
                                                >
                                                    <Plus size={20} />
                                                    Add Reminder
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                )}

                                {activeTab === 'history' && (
                                    <div className="bg-white rounded-lg shadow-sm p-6">
                                        <div className="flex items-center justify-between mb-6">
                                            <h2 className="text-xl font-semibold">Service History</h2>
                                            <button
                                                onClick={() => setShowAddRecord(true)}
                                                className="flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"
                                            >
                                                <Plus size={20} />
                                                Add Record
                                            </button>
                                        </div>

                                        <div className="space-y-4">
                                            {records
                                                .filter(r => r.vehicleId === selectedVehicle)
                                                .sort((a, b) => new Date(b.date) - new Date(a.date))
                                                .map(record => (
                                                    <div key={record.id} className="border rounded-lg p-4 hover:bg-gray-50">
                                                        <div className="flex justify-between items-start mb-2">
                                                            <div>
                                                                <h3 className="font-semibold text-lg">{record.service}</h3>
                                                                <p className="text-gray-600">{new Date(record.date).toLocaleDateString()}</p>
                                                            </div>
                                                            <button
                                                                onClick={() => deleteRecord(record.id)}
                                                                className="text-red-600 hover:text-red-700"
                                                            >
                                                                <Trash2 size={18} />
                                                            </button>
                                                        </div>
                                                        <div className="grid grid-cols-2 gap-4 text-sm">
                                                            <div>
                                                                <span className="text-gray-600">Mileage:</span>
                                                                <span className="ml-2 font-medium">{record.mileage?.toLocaleString()} mi</span>
                                                            </div>
                                                            <div>
                                                                <span className="text-gray-600">Cost:</span>
                                                                <span className="ml-2 font-medium">${parseFloat(record.cost).toFixed(2)}</span>
                                                            </div>
                                                        </div>
                                                        {record.provider && (
                                                            <p className="text-sm text-gray-600 mt-2">Provider: {record.provider}</p>
                                                        )}
                                                        {record.notes && (
                                                            <p className="text-sm text-gray-700 mt-2">{record.notes}</p>
                                                        )}
                                                    </div>
                                                ))}

                                            {records.filter(r => r.vehicleId === selectedVehicle).length === 0 && (
                                                <div className="text-center py-12 text-gray-500">
                                                    No service records yet. Add your first service!
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                )}

                                {activeTab === 'reminders' && (
                                    <div className="bg-white rounded-lg shadow-sm p-6">
                                        <div className="flex items-center justify-between mb-6">
                                            <h2 className="text-xl font-semibold">Maintenance Reminders</h2>
                                            <button
                                                onClick={() => setShowAddReminder(true)}
                                                className="flex items-center gap-2 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700"
                                            >
                                                <Plus size={20} />
                                                Add Reminder
                                            </button>
                                        </div>

                                        <div className="space-y-4">
                                            {reminders
                                                .filter(r => r.vehicleId === selectedVehicle)
                                                .map(reminder => {
                                                    const isActive = getActiveReminders().some(ar => ar.id === reminder.id);
                                                    return (
                                                        <div
                                                            key={reminder.id}
                                                            className={`border rounded-lg p-4 ${isActive ? 'bg-amber-50 border-amber-300' : 'hover:bg-gray-50'}`}
                                                        >
                                                            <div className="flex justify-between items-start">
                                                                <div>
                                                                    <h3 className="font-semibold text-lg">{reminder.service}</h3>
                                                                    <p className="text-gray-600">
                                                                        {reminder.type === 'mileage'
                                                                            ? `At ${reminder.mileage.toLocaleString()} miles`
                                                                            : `On ${new Date(reminder.date).toLocaleDateString()}`}
                                                                    </p>
                                                                    {isActive && (
                                                                        <p className="text-amber-700 font-medium mt-1">âš  Due Now</p>
                                                                    )}
                                                                </div>
                                                                <button
                                                                    onClick={() => deleteReminder(reminder.id)}
                                                                    className="text-red-600 hover:text-red-700"
                                                                >
                                                                    <Trash2 size={18} />
                                                                </button>
                                                            </div>
                                                        </div>
                                                    );
                                                })}

                                            {reminders.filter(r => r.vehicleId === selectedVehicle).length === 0 && (
                                                <div className="text-center py-12 text-gray-500">
                                                    No reminders set. Add one to stay on track!
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                )}
                            </>
                        )}
                    </div>

                    {showAddVehicle && (
                        <AddVehicleModal
                            onClose={() => setShowAddVehicle(false)}
                            onAdd={addVehicle}
                        />
                    )}

                    {showAddRecord && (
                        <AddRecordModal
                            onClose={() => setShowAddRecord(false)}
                            onAdd={addRecord}
                        />
                    )}

                    {showAddReminder && (
                        <AddReminderModal
                            onClose={() => setShowAddReminder(false)}
                            onAdd={addReminder}
                        />
                    )}
                </div>
            );
        };

        const AddVehicleModal = ({ onClose, onAdd }) => {
            const [formData, setFormData] = useState({
                year: '',
                make: '',
                model: '',
                currentMileage: ''
            });

            const handleSubmit = () => {
                if (formData.year && formData.make && formData.model && formData.currentMileage) {
                    onAdd({ ...formData, currentMileage: parseInt(formData.currentMileage) });
                }
            };

            return (
                <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                    <div className="bg-white rounded-lg p-6 max-w-md w-full">
                        <h2 className="text-2xl font-bold mb-4">Add Vehicle</h2>
                        <div className="space-y-4">
                            <input
                                type="number"
                                placeholder="Year"
                                value={formData.year}
                                onChange={(e) => setFormData({ ...formData, year: e.target.value })}
                                className="w-full px-4 py-2 border rounded-lg"
                            />
                            <input
                                type="text"
                                placeholder="Make (e.g., Toyota)"
                                value={formData.make}
                                onChange={(e) => setFormData({ ...formData, make: e.target.value })}
                                className="w-full px-4 py-2 border rounded-lg"
                            />
                            <input
                                type="text"
                                placeholder="Model (e.g., Camry)"
                                value={formData.model}
                                onChange={(e) => setFormData({ ...formData, model: e.target.value })}
                                className="w-full px-4 py-2 border rounded-lg"
                            />
                            <input
                                type="number"
                                placeholder="Current Mileage"
                                value={formData.currentMileage}
                                onChange={(e) => setFormData({ ...formData, currentMileage: e.target.value })}
                                className="w-full px-4 py-2 border rounded-lg"
                            />
                            <div className="flex gap-3">
                                <button
                                    onClick={handleSubmit}
                                    className="flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700"
                                >
                                    Add Vehicle
                                </button>
                                <button
                                    onClick={onClose}
                                    className="flex-1 bg-gray-200 text-gray-700 py-2 rounded-lg hover:bg-gray-300"
                                >
                                    Cancel
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const AddRecordModal = ({ onClose, onAdd }) => {
            const [formData, setFormData] = useState({
                service: '',
                date: new Date().toISOString().split('T')[0],
                mileage: '',
                cost: '',
                provider: '',
                notes: ''
            });

            const commonServices = [
                'Oil Change',
                'Tire Rotation',
                'Brake Service',
                'Air Filter',
                'Transmission Service',
                'Coolant Flush',
                'Battery Replacement',
                'Inspection',
                'Other'
            ];

            const handleSubmit = () => {
                if (formData.service && formData.date && formData.mileage && formData.cost) {
                    onAdd({ ...formData, mileage: parseInt(formData.mileage), cost: parseFloat(formData.cost) });
                }
            };

            return (
                <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                    <div className="bg-white rounded-lg p-6 max-w-md w-full max-h-[90vh] overflow-y-auto">
                        <h2 className="text-2xl font-bold mb-4">Log Service</h2>
                        <div className="space-y-4">
                            <div>
                                <label className="block text-sm font-medium mb-1">Service Type</label>
                                <select
                                    value={formData.service}
                                    onChange={(e)
